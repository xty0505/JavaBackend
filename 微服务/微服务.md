# 微服务

## 微服务优势

### 单体架构

传统单体应用将所有功能的表示层、业务层、数据访问层，包括静态资源等全部都放在一个工程中，编译打包部署到单个服务器上，在项目规模比较小的情况下比较合适。

但当应用业务越来越复杂，会出现以下一些问题：

- 各功能耦合度高，可维护性，可扩展性较差。
- 测试难度大。
- 单体应用并发能力有限。
- 容错率较低，服务器宕机或者应用某个模块出错，整个项目就无法提供服务了。

### 微服务

将应用按照某块功能划分为一个一个相互独立的微服务，每个微服务部署在不同的容器上。应用通过服务描述方式获取到相应的微服务，通常为 RESTful API 基于 HTTP。

优势在于：

- 每个独立的服务内聚性高，各服务之间耦合度低，有良好的扩展性和复用性。
- 服务之间采用 HTTP 通信，也可以采用消息队列进行通信。
- 微服务通常部署在容器中，容器技术使得微服务的管理变得方便。

微服务同样存在一些缺陷：

- 微服务项目构建复杂度远高于单体应用。
- 分布式系统中难以保证数据一致性。
- 服务部署比单体应用更加复杂。



### 微服务中的限流、熔断和降级

微服务架构中的 API 服务往往会因为某些情况如用户增长过快/某个热点事件/恶意访问导致流量激增，多达原来的10倍或20倍，如果真遇到这种情况弹性扩容是来不及的。